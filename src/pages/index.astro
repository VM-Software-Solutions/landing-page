---
const accept = Astro.request.headers.get('accept-language') ?? '';

// Tomamos el primer idioma (ej: "es-AR,es;q=0.9,en;q=0.8")
const primary = accept.split(',')[0]?.trim().toLowerCase() ?? '';

// Si empieza con "es" => español, si no => inglés
const isSpanish = primary.startsWith('es');

return Astro.redirect(isSpanish ? '/es/' : '/en/', 302);
---