---
// ðŸ‘‡ Este flag es **Requisito** para usar Astro.request.headers:
export const prerender = false;

const accept = Astro.request.headers.get('accept-language') ?? '';
const primary = accept.split(',')[0]?.trim().toLowerCase() ?? '';
const isSpanish = primary.startsWith('es');
const target = isSpanish ? '/es/' : '/en/';
---

<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content={"2; url=" + target}>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VM Software Solutions</title>
    <link rel="icon" type="image/png" href="/assets/logo.svg" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        background: radial-gradient(circle at 60% 40%, #18293f 0%, #050711 100%);
        min-height: 100dvh;
        height: 100dvh;
      }
      .redirect-center {
        height: 100dvh;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: #ededed;
        font-family: 'Inter', 'Roboto', Arial, sans-serif;
        font-size: 1.25rem;
        text-shadow: 0 2px 16px #12122a88;
      }
      .loader {
        width: 48px;
        height: 48px;
        margin: 1.5rem;
        border-radius: 50%;
        border: 5px solid #45ecff55;
        border-top-color: #54ffce;
        animation: spin 1.1s linear infinite;
        box-shadow: 0 0 16px #28ffff44;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
    </style>
    <script is:inline>
      setTimeout(function() {
        window.location.replace(target);
      }, 1800);
    </script>
  </head>
  <body>
    <div class="redirect-center">
      <div class="loader"></div>
      <div>Redirigiendo a tu idioma preferido...</div>
      <div style="font-size:.9em;color:#8eeaf7;margin-top:.7em;">
        Si no sucede automÃ¡ticamente, haz <a href={target} style="color:#bafffd;text-decoration:underline;">clic aquÃ­</a>.
      </div>
    </div>
  </body>
</html>