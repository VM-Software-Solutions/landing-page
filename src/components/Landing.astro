---
import martinImg from "../assets/martin.jpeg";
import valentinoImg from "../assets/valentino.jpeg";
import { getMessages, type Lang } from "../i18n/messages";
import Contact from "./Contact.astro";

const { lang = "es" } = Astro.props as { lang?: Lang };
const t = getMessages(lang);

const idFromHref = (href: string) =>
  href.startsWith("#") ? href.slice(1) : href;

const photoMap: Record<string, { src: string }> = {
  "martin.jpeg": martinImg,
  "valentino.jpeg": valentinoImg,
};
---

<main class="relative z-10 pt-16">
  <!-- Servicios -->
  <section
    id={idFromHref(t.nav.services.href)}
    class="mx-auto max-w-6xl px-6 pt-40 pb-40"
  >
    <h2 class="text-white text-3xl md:text-4xl font-semibold">
      {t.sections.services.title}
    </h2>
    <p class="mt-3 text-white/75 max-w-4xl">{t.sections.services.subtitle}</p>

    <div class="mt-10 grid gap-8 md:grid-cols-3">
      {
        t.sections.services.items.map((item) => (
          <div class=" rounded-2xl border border-white/10 bg-white/5 p-8 text-white  hover:scale-105 hover:shadow-2xl transition-transform duration-300">
            <div class="flex flex-col items-center">
              <span class="material-icons service-icon mb-4">
                {item.icon}
              </span>
              <h3 class="font-bold text-xl text-center mb-2 tracking-wide service-title">
                {item.title}
              </h3>
              <p class="mt-2 text-white/80 text-center">{item.description}</p>
            </div>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Equipo -->
  <section
    id={idFromHref(t.nav.team.href)}
    class="mx-auto max-w-6xl px-6 pt-40 pb-60"
  >
    <h2 class="text-white text-3xl md:text-4xl font-semibold">
      {t.sections.team.title}
    </h2>
    <p class="mt-3 text-white/75 max-w-2xl">{t.sections.team.subtitle}</p>
    <div class="mt-10 grid gap-6 md:grid-cols-2">
      {
        t.sections.team.members.map((member) => (
          <div class="flex flex-col items-center rounded-xl border border-white/10 bg-white/5 p-6 text-white">
            <img
              src={photoMap[member.photo]?.src}
              alt={member.name}
              class="w-28 h-28 rounded-full object-cover border-2 border-white/20 shadow-lg mb-4"
            />
            <h3 class="font-semibold text-lg">{member.name}</h3>
            <p class="mt-1 text-emerald-300 font-medium">{member.role}</p>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Compañías/Slider -->
  <!-- <section id={idFromHref(t.nav.slider.href)} class="mx-auto max-w-6xl px-6 py-20">
    <h2 class="text-white text-3xl md:text-4xl font-semibold">{t.sections.slider.title}</h2>
    <p class="mt-3 text-white/75 max-w-2xl">{t.sections.slider.subtitle}</p>
    <div class="mt-10">
      <div class="flex flex-wrap justify-center gap-6 md:gap-8 lg:gap-10">
        {t.sections.slider.items.map((item) => (
          <article class="w-[90%] sm:w-1/2 md:w-1/3 lg:w-1/4 rounded-xl border border-white/10 bg-white/5 p-6 text-white overflow-hidden hover:scale-105 transition-transform duration-300">
            <div class="w-full overflow-hidden rounded-md bg-white/5 aspect-square">
              {
                !item.logo ? (
                  <img width="96" height="96" src={companyPlaceholder.src} alt="company"/>
                ) : (
                  <img src={item.logo} alt={item.name} class="w-full h-full object-cover" onerror={`this.src='${companyPlaceholder.src}'`} />
                )
              }
            </div>
            <h3 class="font-semibold text-lg mt-4">{item.name}</h3>
            <p class="mt-2 text-white/70">{item.description}</p>
          </article>
        ))}
      </div>
    </div>
  </section> -->

  <!-- Contacto -->
  <Contact lang={lang} />
</main>

<style>

  .service-card:hover {
    box-shadow: 0 8px 40px 0 #0fffcf55, 0 2px 12px 0 #00000066;
    /* Elimina el gradiente en hover para mantener el fondo gris */
    background: #23263a;
  }
  .service-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    width: 3.2rem;
    height: 3.2rem;
    border-radius: 50%;
    background: linear-gradient(135deg, #54ffce 30%, #54ffce 100%);
    color: #18293f;
    margin-bottom: 1.2rem;
    margin-top: 0.5rem; /* Ajusta el margen superior para que no se salga */
    border: 3px solid #fff3;
  }
  .service-title {
    letter-spacing: 0.02em;
  }
</style>
