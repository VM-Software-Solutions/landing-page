---
import logo from '../assets/logo.png';
import { getMessages, type Lang } from '../i18n/messages';

const { lang = 'es' } = Astro.props as { lang?: Lang };
const t = getMessages(lang);

const otherLang: Lang = lang === 'es' ? 'en' : 'es';
const langHref = otherLang === 'es' ? '/es/' : '/en/';
---

<header>
  <nav class="fixed top-0 left-0 right-0 z-50 flex items-center justify-center h-16 text-white text-lg font-semibold bg-transparent backdrop-blur-md border-b border-white/10 px-4">
    <div>
      <img src={logo.src} alt="Logo de VM Software" class="inline-block h-8 w-auto mr-3" height="64" />
    </div>

    <div class="ml-auto flex items-center gap-4">
      <ul class="hidden md:flex items-center gap-6">
        <li><a href={t.nav.home.href} class="hover:text-white/80">{t.nav.home.label}</a></li>
        <li><a href={t.nav.contact.href} class="hover:text-white/80">{t.nav.contact.label}</a></li>
        <li><a href={t.nav.slider.href} class="hover:text-white/80">{t.nav.slider.label}</a></li>
      </ul>

      <!-- Switch de idioma (opcional) -->
      <a href={langHref} class="hidden md:inline-flex items-center rounded border border-white/15 px-3 py-1 text-sm hover:bg-white/10">
        {otherLang.toUpperCase()}
      </a>

      <details class="md:hidden relative mobile-menu">
        <summary class="p-2 rounded hover:bg-white/10 cursor-pointer" aria-label="Open menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </summary>

        <div class="absolute right-0 mt-2 w-48 bg-gray-900/80 backdrop-blur-md border border-white/10 rounded shadow-lg py-2 z-20">
          <a href={t.nav.home.href} class="block px-4 py-2 hover:bg-white/10">{t.nav.home.label}</a>
          <a href={t.nav.contact.href} class="block px-4 py-2 hover:bg-white/10">{t.nav.contact.label}</a>
          <a href={t.nav.slider.href} class="block px-4 py-2 hover:bg-white/10">{t.nav.slider.label}</a>

          <a href={langHref} class="block px-4 py-2 hover:bg-white/10 text-white/90">
            {otherLang.toUpperCase()}
          </a>
        </div>
      </details>
    </div>
  </nav>
</header>

<style>
  nav {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .mobile-menu summary::-webkit-details-marker { display: none; }
  .mobile-menu summary::marker { content: ""; }
</style>